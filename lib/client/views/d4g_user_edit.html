<template name="d4g_user_edit">
  <div class="grid-small grid-module dialog user-edit">
    {{#with user}}
    {{#if profileIncomplete}}
    <div>
      Please complete your profile below before continuing.
    </div>
    {{/if}}
    <form id="account-form">
      <h2>Account</h2>
      <div class="control-group">
        <label>Username</label>
        <div class="controls">
          <input id="username" name="username" disabled="disabled" type="text" value="{{userName}}" />
        </div>
        <p class="note">Profile URL: {{profileUrl}}</p>
      </div>
      <div class="control-group">
        <label>Display Name</label>
        <div class="controls">
          <input name="name" type="text" value="{{profile.name}}" />
        </div>
      </div>
      <div class="control-group">
        <label>Email</label>
        <div class="controls">
          <input name="email" type="text" value="{{userEmail}}" />
        </div>
      </div>
      <div class="control-group">
        <label>Bio</label>
        <div class="controls"><textarea name="bio" type="text">{{profile.bio}}</textarea></div>
      </div>
      <div class="control-group">
      <label>Twitter Username</label>
        <div class="controls">
          <input name="twitter" type="text" value="{{getTwitter}}" />
        </div>
      </div>
      <div class="control-group">
        <label>GitHub Username</label>
        <div class="controls">
          <input name="github" type="text" value="{{getGitHub}}" />
        </div>
      </div>
      <div class="control-group">
        <label>Site</label>
        <div class="controls">
          <input name="site" type="text" value="{{profile.site}}" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Email Notifications</label>
        <div class="controls">
          {{#if isAdmin}}
            <label class="checkbox">
              <input id="notifications_users" type="checkbox" name="notifications_users" {{hasNotificationsUsers}} /> New Users
            </label>
          {{/if}}
          <label class="checkbox">
            <input id="notifications_posts" type="checkbox" name="notifications_posts" {{hasNotificationsPosts}} /> New Posts
          </label>
          <label class="checkbox">
            <input id="notifications_comments" type="checkbox" name="notifications_comments" {{hasNotificationsComments}} /> Comments on my posts
          </label>
          <label class="checkbox">
            <input id="notifications_replies" type="checkbox" name="notifications_replies" {{hasNotificationsReplies}} /> Replies to my comments
          </label>
        </div>
      </div>
      <div class="form-actions">
        <input type="submit" class="button" value="Submit" />
      </div>
      <hr>
      {{#if hasPassword}}
        <div class="pw-change">
          <h4>Change Password?</h4>
          <div class="control-group">
            <label>Old Password</label>
            <div class="controls"><input name="old_password" type="password" value="" /></div>
          </div>
          <div class="control-group">
            <label>New Password</label>
            <div class="controls"><input name="new_password" type="password" value="" /></div>
          </div>
        </div>
      {{/if}}
      <div class="form-actions">
        <input type="submit" class="button" value="Submit" />
      </div>
    </form>
    {{/with}}
  </div>
</template>
